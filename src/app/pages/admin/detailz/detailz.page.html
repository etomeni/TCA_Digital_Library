<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar style="color: white;">
    
    <h1 style="margin: 0; padding-left: 10px;">
      
      <span style="color: #de2341;">
        <ion-icon name="arrow-back-circle" (click)="goback()"></ion-icon> 
        TCA 
      </span> 
      <span style="color: white;">Family - </span>

      <span style="font-size: 14px;"> General Detials </span>
    </h1>

    <ion-buttons slot="end">
      <ion-menu-button menu="main-menu" style="color: white;"></ion-menu-button>
    </ion-buttons>

  </ion-toolbar>
</ion-header>


<ion-content [fullscreen]="true">
  <ion-grid>

    <ion-row>
      <ion-col size="12">
        <form [formGroup]="generalForm" (ngSubmit)="onSubmitGeneralForm()">
          
          <div data-info="name input">
            <ion-item lines="none" style="border-radius: 10px 10px 0 0;">
              <ion-label position="floating">Full Name(s) <ion-text color="danger">*</ion-text></ion-label>
              <ion-input required minlength="3" formControlName="name" autocomplete="name" type="text"></ion-input>
            </ion-item>

            <span class="error ion-padding" 
              *ngIf="generalForm.get('name').touched && generalForm.get('name').dirty && generalForm.get('name').invalid"
            >
              <span class="error ion-padding" *ngIf="generalForm.get('name').errors?.required">
                Please Enter your name
              </span>
              <span class="error ion-padding" *ngIf="generalForm.get('name').errors?.minlength">
                Name characters should be more than 3 characters.
              </span>
            </span>
          </div>

          <div data-info="email input">
            <ion-item lines="none">
              <ion-label position="floating">E-Mail <ion-text color="danger">*</ion-text></ion-label>
              <ion-input required minlength="5" formControlName="email" type="email" autocomplete="email"></ion-input>
            </ion-item>

            <span class="error ion-padding" 
              *ngIf="generalForm.get('email').touched && generalForm.get('email').dirty && generalForm.get('email').invalid"
            >
              <span class="error ion-padding" *ngIf="generalForm.get('email').errors?.required">
                Please Enter your Email address.
              </span>
              <span class="error ion-padding" *ngIf="generalForm.get('email').errors?.pattern || generalForm.get('email').errors?.email">
                Incorrect Email address.
              </span>
            </span>
          </div>
          
          <div data-info="Phone-Number input">
            <ion-item lines="none">
              <ion-label position="floating">Phone Number <ion-text color="danger">*</ion-text></ion-label>
              <ion-input required minlength="10" formControlName="phoneNumber" type="tel" autocomplete="tel"></ion-input>
            </ion-item>

            <span class="error ion-padding" 
              *ngIf="generalForm.get('phoneNumber').touched && generalForm.get('phoneNumber').dirty && generalForm.get('phoneNumber').invalid"
            >
              <span class="error" *ngIf="generalForm.get('phoneNumber').errors?.required;">
                Please Enter your Phone Number.
              </span>
              <span class="error" *ngIf="generalForm.get('phoneNumber').errors?.pattern || generalForm.get('phoneNumber').errors?.minlength;">
                Phone Number not correct.
              </span>
            </span>
          </div>

          <div data-info="Message input">
            <ion-item lines="none" style="border-radius: 0 0 10px 10px;">
              <ion-label position="floating">Message <ion-text color="danger">*</ion-text></ion-label>
              <ion-textarea formControlName="message" class="messageText" required minlength="10" placeholder="Send us your feedback, we're waiting to receive them..."></ion-textarea>
            </ion-item>

            <span class="error ion-padding" 
              *ngIf="generalForm.get('message').touched && generalForm.get('message').dirty && generalForm.get('message').invalid"
              lines="none"
            >
              <span class="error" *ngIf="generalForm.get('message').errors?.required;">
                Please Enter your Message.
              </span>
              <span class="error" *ngIf="generalForm.get('message').errors?.minlength;">
                Your message is too short, please drop a comprehensive message.
              </span>
            </span>
          </div>

          <div *ngIf="submittedDetails.generalSent" style="background-color: #de2341; color: white; text-align: center; border-radius: 10px;">
            <p style="padding-top: 15px; padding-bottom: 15px;">
              Contact Message sent successfully!!!
            </p>
          </div>

          <ion-button block type="submit" [disabled]="generalForm.invalid || submittedDetails.generalState" mode="md" style="--background: #de2341;">
            Send Message <i *ngIf="submittedDetails.generalState" class="loader"></i>
          </ion-button>
        </form>
      </ion-col>
    </ion-row>




    <ion-row style="margin-top: 20px;">
      <ion-col size="12">
        <div style="margin: 10px unset; text-align: center; color: #ffffff;">
          <h2>Update Offering Bank Account Details!</h2>
        </div>

        <form [formGroup]="offeringAcctForm" (ngSubmit)="onSubmitOfferingAcct()">

          <div data-info="bankName input">
            <ion-item lines="none" style="border-radius: 10px 10px 0 0;">
              <ion-label position="floating">Bank Name <ion-text color="danger">*</ion-text></ion-label>
              <ion-input required minlength="3" formControlName="bankName" type="text"></ion-input>
            </ion-item>

            <span class="error ion-padding" 
              *ngIf="offeringAcctForm.get('bankName').touched && offeringAcctForm.get('bankName').dirty && offeringAcctForm.get('bankName').invalid"
            >
              <span class="error ion-padding" *ngIf="offeringAcctForm.get('bankName').errors?.required">
                Please enter the bank name
              </span>
              <span class="error ion-padding" *ngIf="offeringAcctForm.get('bankName').errors?.minlength">
                Name of bank characters should be more than 3 characters.
              </span>
            </span>
          </div>

          <div data-info="accountNumber input">
            <ion-item lines="none">
              <ion-label position="floating">Account Number <ion-text color="danger">*</ion-text></ion-label>
              <ion-input required minlength="10" maxlength="10" formControlName="accountNumber" type="number"></ion-input>
            </ion-item>

            <span class="error ion-padding" 
              *ngIf="offeringAcctForm.get('accountNumber').touched && offeringAcctForm.get('accountNumber').dirty && offeringAcctForm.get('accountNumber').invalid"
            >
              <span class="error" *ngIf="offeringAcctForm.get('accountNumber').errors?.required;">
                Please enter the bank account number.
              </span>
              <span class="error" *ngIf="offeringAcctForm.get('accountNumber').errors?.maxlength || offeringAcctForm.get('accountNumber').errors?.minlength;">
                Account number is not correct.
              </span>
            </span>
          </div>

          <div data-info="accountName input">
            <ion-item lines="none" style="border-radius: 0 0 10px 10px;">
              <ion-label position="floating">Account Name <ion-text color="danger">*</ion-text></ion-label>
              <ion-input required minlength="3" formControlName="accountName" type="text"></ion-input>
            </ion-item>

            <span class="error ion-padding" 
              *ngIf="offeringAcctForm.get('accountName').touched && offeringAcctForm.get('accountName').dirty && offeringAcctForm.get('accountName').invalid"
            >
              <span class="error ion-padding" *ngIf="offeringAcctForm.get('accountName').errors?.required">
                Please enter the bank account name
              </span>
              <span class="error ion-padding" *ngIf="offeringAcctForm.get('accountName').errors?.minlength">
                Account name characters should be more than 3 characters.
              </span>
            </span>
          </div>
          
          <div *ngIf="submittedDetails.offeringSent" style="background-color: #de2341; color: white; text-align: center; border-radius: 10px;">
            <p style="padding-top: 15px; padding-bottom: 15px;">
              Account details has been updated successfully!
            </p>
          </div>

          <ion-button block type="submit" [disabled]="offeringAcctForm.invalid || submittedDetails.offeringState" mode="md" style="--background: #de2341;">
            Submit <i *ngIf="submittedDetails.offeringState" class="loader"></i>
          </ion-button>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>


</ion-content>
